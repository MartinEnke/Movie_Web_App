{% extends "base.html" %}
{% block title %}{{ user.name }}’s Movies{% endblock %}

{% block content %}
  <h2 class="font-semibold mb-4">{{ user.name }}’s Cinesis</h2>


  {% if movies %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for movie in movies %}
        <div class="bg-white rounded-lg shadow p-4 flex flex-col">
          {% if movie.poster and movie.poster!='N/A' %}
            <img src="{{ movie.poster }}" alt="" class="rounded mb-4 object-cover h-48 w-full">
          {% endif %}
          <h2 class="text-xl font-bold">{{ movie.name }}</h2>
          <p class="text-sm text-gray-600">{{ movie.year }} • {{ movie.rating }}/10</p>
          <p class="mt-auto">
            <a href="{{ url_for('main.update_movie',user_id=user.id,movie_id=movie.id) }}"
               class="text-accent hover:underline mr-2">Edit</a>
            <form action="{{ url_for('main.delete_movie',user_id=user.id,movie_id=movie.id) }}"
                  method="post" class="inline">
              <button type="submit"
                      class="text-red-600 hover:underline">Delete</button>
            </form>
          </p>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No movies found for this user.</p>
  {% endif %}

  <div class="mt-6 space-x-4">
    <a href="{{ url_for('main.add_movie', user_id=user.id) }}" class="text-accent hover:underline">Add Movie</a>
    <a href="{{ url_for('main.list_users') }}" class="hover:underline">Back to Users</a>
  </div>
{% endblock %}